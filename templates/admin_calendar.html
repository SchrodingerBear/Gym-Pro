<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
    <title>Admin Calendar</title>
</head>
<body class="admin-dashboard">
    <!-- Sidebar -->
    <div class="admin-sidebar">
        <h2>GymPro Manager</h2>
        <nav class="admin-nav">
            <ul>
                <li><a href="{{ url_for('admin_dashboard') }}"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="{{ url_for('admin_membership') }}"><i class="fas fa-users"></i> Membership</a></li>
                <li><a href="{{ url_for('admin_calendar') }}" class="active"><i class="fas fa-calendar-alt"></i> Calendar</a></li>
                <li><a href="{{ url_for('admin_booking') }}"><i class="fas fa-book"></i> Bookings</a></li>
                <li><a href="{{ url_for('admin_borrowing') }}"><i class="fas fa-cogs"></i> Borrowing</a></li>
                <li><a href="{{ url_for('admin_inventory') }}"><i class="fas fa-box"></i> Inventory</a></li>
                <li><a href="{{ url_for('admin_notifications') }}"><i class="fas fa-bell"></i> Notifications</a></li>
                <li><a href="{{ url_for('admin_settings') }}"><i class="fas fa-cog"></i> Settings</a></li>
                <li><a href="{{ url_for('logout') }}"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
        </nav>
    </div>

    <!-- Main Content -->
    <main class="admin-content">
        <header class="admin-header">
            <h1>Admin Calendar</h1>
        </header>
        
        <div class="calendar-box">
            <div id="calendar"></div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="admin-footer">
        <p>&copy; 2024 GymPro</p>
    </footer>

    <!-- Calendar Initialization Script -->
    <script>
           $(document).ready(function() {
    $('#calendar').fullCalendar({
        defaultView: 'month',
        defaultDate: moment(), // Set default date to today
        events: '/get_events', // API endpoint to fetch events
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        dayRender: function(date, cell) {
            $.get('/check_booking/' + date.format(), function(data) {
                if (data.isBooked) {
                    cell.css('background-color', 'red');
                } else {
                    cell.css('background-color', 'green');
                }
            });
        },
        viewRender: function(view) {
            var currentMoment = moment(); // Get today's date
            var viewMoment = moment(view.calendar.getDate()); // Get the view's date

            // If today is in the current month, highlight the date number
            if (currentMoment.isSame(viewMoment, 'month')) {
                $("td[data-date='" + currentMoment.format("YYYY-MM-DD") + "'] .fc-day-number").css({
                    'background-color': '#FFFF00', // Highlight the date number
                    'border-radius': '50%', // Round the highlight around the date
                    'padding': '5px', // Add some padding around the date number
                    'width': 'auto', // Keep the width auto to match the date square
                    'height': 'auto' // Same for height
                });
            }
        }
    });
});
    </script>
</body>
</html>
